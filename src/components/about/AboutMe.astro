<section class="about-me">
  <div class="flex flex-col gap-2">
    <h1>Clayton Ingalls</h1>
    <h2 class="highlight">Web Developer</h2>
  </div>
  <div class="flex flex-col gap-4">
    <p>
      I build interactive, responsive web applications using modern web
      technologies.
    </p>
    <p>
      I have a particular interest in React having worked with it daily since
      2018.
    </p>
  </div>

  <nav class="about-nav" aria-label="navigation for about page">
    <ul>
      <li>
        <a href="#origin" class="nav-link active"
          ><div class="bullet"></div>Origin Story</a
        >
      </li>
      <li>
        <a href="#roles" class="nav-link"><div class="bullet"></div>Roles</a>
      </li>
      <li>
        <a href="#volunteer" class="nav-link"
          ><div class="bullet"></div>Volunteer</a
        >
      </li>
      <li>
        <a href="#projects" class="nav-link"
          ><div class="bullet"></div>Projects</a
        >
      </li>
    </ul>
  </nav>
</section>

<style>
  .about-me {
    align-self: start;
    display: flex;
    flex-direction: column;
    gap: 2rem;
    padding-block-start: 10rem;

    h1 {
      font-size: 2.5rem;
      font-weight: 600;
    }

    h2 {
      font-size: 1.75rem;
      position: relative;
      display: inline-block;
      padding-inline-end: 3rem;
    }

    p {
      color: #d2c6e1;
    }
  }

  .about-nav {
    display: none;
  }

  nav ul {
    display: flex;
    flex-direction: column;
    gap: 1.25rem;
    margin-block-start: 2.5rem;
  }
  .nav-link {
    display: flex;
    align-items: center;
    gap: 1rem;
    text-transform: uppercase;
    letter-spacing: 1px;
    font-size: 0.9rem;
    color: #d2c6e1;

    & .bullet {
      width: 2rem;
      height: 0.1rem;
      background-color: #d2c6e1;
      transition: all 0.3s ease;
    }
    &.active {
      font-weight: 600;
      color: #fff;

      .bullet {
        width: 4rem;
        height: 0.2rem;
        background-color: #fff;
      }
    }
  }
  .nav-link.active {
    font-weight: 600;
  }

  @media screen and (min-width: 1024px) {
    .about-nav {
      display: block;
    }

    .about-me {
      position: sticky;
      top: 0;

      p {
        max-width: 450px;
      }
    }
  }

  .highlight::after {
    content: "";
    position: absolute;
    bottom: -8px;
    left: 0;
    height: 5px;
    animation-name: grow;
    animation-duration: 0.5s;
    animation-timing-function: ease-out;
    animation-delay: 0.5s;
    animation-fill-mode: forwards;
  }

  @keyframes grow {
    from {
      width: 0%;
      background: #ff5d5d;
    }

    to {
      width: 60%;
      background: #ff5d5d;
    }
  }
</style>

<script>
  function handleScroll() {
    let main = document.querySelector("main");
    if (!main) return;

    main.addEventListener("scroll", function () {
      const top = main.scrollTop;
      const sections: NodeListOf<HTMLElement> =
        document.querySelectorAll(".history-section");
      const navLinks = document.querySelectorAll(".nav-link");

      let currentSection = "";

      sections?.forEach((section) => {
        const sectionTop = section.offsetTop;
        if (top >= sectionTop - 350) {
          currentSection = section.getAttribute("id") || "";
        }
      });

      navLinks.forEach((link) => {
        link.classList.remove("active");
        if (link.getAttribute("href") === `#${currentSection}`) {
          link.classList.add("active");
        }
      });
    });
  }

  handleScroll();
</script>
